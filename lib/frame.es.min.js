function e(e){return e instanceof Element?e:document.querySelector(e)}function t(e,n){if(e instanceof Node)n(e,null);else if(Array.isArray(e)){let o;for(let r=0;r<e.length;r++){const c=e[r];c instanceof Promise?(o?o.push(c):o=[c],c.then(o=>{t(o,(t,o)=>{e[r]=t;for(let t=r+1;t<e.length;t++)if(e[t]&&e[t]instanceof Node){o=e[t];break}n(t,o)})})):t(c,n)}if(o)return Promise.all(o)}else{if(e instanceof Promise)return e.then(e=>t(e,n));if(null==e);else{const o=typeof e;if("object"===o&&"Object"!==e.__proto__.constructor.name&&"el"in e&&e.el instanceof Node)n(e.el,null);else{if("function"===o)return t(e(),n);n(document.createTextNode(e),null)}}}}function n(t,o){const r=e(t);return n.clear(r),n.append(r,o)}function o(e){for(const t of Array.isArray(e)?e:[e])t.remove()}function r(e,t,n){return r.table=t,r.root=e,r.base="string"==typeof n?n:document.location.pathname+"#",window.addEventListener("popstate",({state:{path:e}})=>{r.set(e,event.state)}),console.log("router base : "+document.location.pathname),r.set(document.location.pathname+document.location.hash),r}function c(e,t,o,c){const[i,s,l]=function(e){const[,t,,n,o]=/^(\w*)(#([\w-]+)|)((\.[\w-]+)*)$/g.exec(e||""),r=o.split(".").slice(1);return[t.length>0?t:"div",n&&n.length>0?n:null,r]}(t);let a,u;"object"==typeof o&&"Object"===o.__proto__.constructor.name?(a=o,u=c):u=o;const f=e?document.createElementNS(e,i):document.createElement(i);if(s&&(f.id=s),l.length>0&&(f.className=l.join(" ")),r.table&&"a"===i&&!("click"in a)&&"href"in a&&r.get(a.href)&&(a.click=e=>{r.go(a.href),e.preventDefault()}),a)for(const[e,t]of Object.entries(a))"function"==typeof t?(f.addEventListener(e,t),"click"!==e||"a"!==i||"href"in a||f.setAttribute("href","javascript:;")):f.setAttribute(e,t);return n(f,u),f}n.clear=function(t){const n=e(t);n.childNodes.length>0&&(n.innerHTML="")},n.prepend=function(t,o){const r=e(t);return n.before(r,o,r.firstChild)},n.append=function(t,o){const r=e(t);return n.after(r,o,null)},n.before=function(n,o,r){const c=e(n);return t(o,(e,t)=>{c.insertBefore(e,t||r)})},n.after=function(n,o,r){const c=e(n),i=r?r.nextSibling:null;return t(o,(e,t)=>{c.insertBefore(e,t||i)})},n.replace=function(e,o){if(e)return t(e,e=>{o.parentNode.replaceChild(e,o)});n.clear(o.parentNode)},r.table=null,r.set=function(e){let t=r.get(e);t?(console.log("set ",e,t),n(r.root,t)):console.error("No route found "+e)},r.go=function(e,t){r.set(e),history.pushState({path:e},"Title",r.base+e)},r.get=function(e){if("#"===r.base.substr(-1)&&e+"#"===r.base&&(e="/"),e.startsWith(r.base)&&(e=e.substring(r.base.length)),console.log("get "+e),e in r.table)return r.table[e]};const i={};function s(e,t){return fetch(e,t).then(e=>e.json())}function*l(e,t=null,n=1){if(2===arguments.length&&(n=t||1,t=e,e=0),e>t){const n=e;e=t,t=n}for(let o=e;o<=t;o+=n)yield o}function a(e,t=null,n=1){return new Array(...l(e,t,n))}s.get=function(e,t={}){const n=new URL(e,document.location.href),o=new URLSearchParams(e.search);for(const[e,n]of Object.entries(t))if(Array.isArray(n))for(const t of n)o.append(e,t);else o.append(e,n);return n.search=o.toString(),s(n.toString(),{method:"GET",credentials:"include"})},s.post=function(e,t){return s(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"},credentials:"include"})},s.put=function(e,t){return s(e,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"},credentials:"include"})},s.delete=function(e,t){return s(e,{method:"DELETE",body:JSON.stringify(t),headers:{"Content-Type":"application/json"},credentials:"include"})},i.json=s;class u{constructor(e,t){this.el=e(),t.then(e=>n.replace(e,this.el))}}function f(e,t,n){return c(null,e,t,n)}function d(e,t,n){return c(null,e,t,n)}function p(e,t,n){return c("http://www.w3.org/2000/svg",e,t,n)}export default d;export{u as PromiseSwitcher,c as element,d as f,f as html,l as irange,n as mount,a as range,i as request,r as route,p as svg,o as unmount};
