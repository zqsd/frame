function e(e){return e instanceof Element?e:document.querySelector(e)}function t(e,n){if(e instanceof Node)n(e,null);else if(Array.isArray(e)){let o;for(let r=0;r<e.length;r++){const c=e[r];c instanceof Promise?(o?o.push(c):o=[c],c.then(o=>{t(o,(t,o)=>{e[r]=t;for(let t=r+1;t<e.length;t++)if(e[t]&&e[t]instanceof Node){o=e[t];break}n(t,o)})})):t(c,n)}if(o)return Promise.all(o)}else{if(e instanceof Promise)return e.then(e=>t(e,n));if(null==e);else{const o=typeof e;if("object"===o&&"Object"!==e.__proto__.constructor.name&&"el"in e&&e.el instanceof Node)n(e.el,null);else{if("function"===o)return t(e(),n);n(document.createTextNode(e),null)}}}}function n(t,o){const r=e(t);return n.clear(r),n.append(r,o)}function o(e){for(const t of Array.isArray(e)?e:[e])t.remove()}function r(e,t,n){for(const e in t)r.add(e,t[e]);return r.root=e,r.base="string"==typeof n?n:document.location.pathname+"#",window.addEventListener("popstate",({state:e})=>{e?r.set(e.path,e.params):r.set(document.location.pathname+document.location.hash)}),r.set(document.location.pathname+document.location.hash),r}function c(e){const t=e.replace(/\//g,"\\/").replace(/:(\w+)/g,"(?<$1>\\w+)");return new RegExp(`^${t}$`)}function i(e,t,o,c){const[i,s,a]=function(e){const[,t,,n,o]=/^(\w*)(#([\w-]+)|)((\.[\w-]+)*)$/g.exec(e||""),r=o.split(".").slice(1);return[t.length>0?t:"div",n&&n.length>0?n:null,r]}(t);let l,u;"object"==typeof o&&"Object"===o.__proto__.constructor.name?(l=o,u=c):u=o;const f=e?document.createElementNS(e,i):document.createElement(i);if(s&&(f.id=s),a.length>0&&(f.className=a.join(" ")),r.table&&"a"===i&&!("click"in l)&&"href"in l&&r.get(l.href)&&(l.click=e=>{r.go(l.href),e.preventDefault()}),l)for(const[e,t]of Object.entries(l))"function"==typeof t?(f.addEventListener(e,t),"click"!==e||"a"!==i||"href"in l||f.setAttribute("href","javascript:;")):f.setAttribute(e,t);return n(f,u),f}n.clear=function(t){const n=e(t);n.childNodes.length>0&&(n.innerHTML="")},n.prepend=function(t,o){const r=e(t);return n.before(r,o,r.firstChild)},n.append=function(t,o){const r=e(t);return n.after(r,o,null)},n.before=function(n,o,r){const c=e(n);return t(o,(e,t)=>{c.insertBefore(e,t||r)})},n.after=function(n,o,r){const c=e(n),i=r?r.nextSibling:null;return t(o,(e,t)=>{c.insertBefore(e,t||i)})},n.replace=function(e,o){if(e)return t(e,e=>{o.parentNode.replaceChild(e,o)});n.clear(o.parentNode)},r.table=[],r.add=function(e,t){r.table.push({pattern:e,regex:c(e),content:t})},r.set=function(e){let[t,o]=r.get(e);if(!t)throw new Error("No route found "+e);{let e=t instanceof Function?t(o):t;n(r.root,e)}},r.go=function(e){r.set(e),history.pushState({path:e},"Title",r.base+e)},r.get=function(e){"#"===r.base.substr(-1)&&e+"#"===r.base&&(e="/"),e.startsWith(r.base)&&(e=e.substring(r.base.length));for(const t of r.table){const n=t.regex.exec(e);if(n)return[t.content,n.groups]}};const s={};function a(e,t){return fetch(e,t).then(e=>e.json())}function*l(e,t=null,n=1){if(2===arguments.length&&(n=t||1,t=e,e=0),e>t){const n=e;e=t,t=n}for(let o=e;o<=t;o+=n)yield o}function u(e,t=null,n=1){return new Array(...l(e,t,n))}a.get=function(e,t={}){const n=new URL(e,document.location.href),o=new URLSearchParams(e.search);for(const[e,n]of Object.entries(t))if(Array.isArray(n))for(const t of n)o.append(e,t);else o.append(e,n);return n.search=o.toString(),a(n.toString(),{method:"GET",credentials:"include"})},a.post=function(e,t){return a(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"},credentials:"include"})},a.put=function(e,t){return a(e,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"},credentials:"include"})},a.delete=function(e,t){return a(e,{method:"DELETE",body:JSON.stringify(t),headers:{"Content-Type":"application/json"},credentials:"include"})},s.json=a;class f{constructor(e,t){this.el=e(),t.then(e=>n.replace(e,this.el))}}function d(e,t,n){return i(null,e,t,n)}function p(e,t,n){return i(null,e,t,n)}function h(e,t,n){return i("http://www.w3.org/2000/svg",e,t,n)}export default p;export{f as PromiseSwitcher,i as element,p as f,d as html,l as irange,n as mount,u as range,s as request,r as route,h as svg,o as unmount};
